---
import { getCollection } from "astro:content";
import DocsLayout from "../../layouts/DocsLayout.astro";

// ✅ Wajib untuk dynamic routes
export async function getStaticPaths() {
  const docs = await getCollection("docs");
  return docs.map((doc: any) => ({
    params: { slug: doc.slug },
  }));
}

// ✅ Ambil parameter dari URL
const { slug } = Astro.params;

// ✅ Ambil semua dokumen di koleksi `docs`
const docs = await getCollection("docs");

// ✅ Cari dokumen sesuai slug
const entry = docs.find((doc: any) => doc.slug === slug);

if (!entry) {
  throw new Error(`Dokumen "${slug}" tidak ditemukan`);
}

// ✅ Render konten Markdown-nya
const { Content } = await entry.render();
---

<DocsLayout title={entry.data.title}>
  <article class="prose prose-sm prose-zinc dark:prose-invert prose-h1:text-secondary-900 dark:prose-h1:text-white prose-h2:text-secondary-800 dark:prose-h2:text-secondary-100 prose-p:text-secondary-800 dark:prose-p:text-secondary-200 prose-a:text-secondary-700 prose-a:decoration-secondary-500/50 prose-a:underline-offset-2 prose-a:hover:text-black dark:prose-a:text-secondary-300 dark:prose-a:decoration-secondary-400/50 dark:prose-a:hover:text-white prose-pre:p-0 prose-pre:text-sm max-w-2xl">
    <Content />
  </article>
</DocsLayout>

<style>
  pre.astro-code.dracula{
    padding: 13px !important;
  }
</style>